# ==============================================================================
# COMPLETE FIX: RabbitMQ Exporter Port Configuration
# ==============================================================================
# Root Cause: kbudde/rabbitmq_exporter defaults to port 9419
# Solution: Set PUBLISH_PORT=9090 environment variable to match container port
# Status: PERMANENT FIX (not incident-specific)
# ==============================================================================

spec:
  template:
    spec:
      containers:
        - name: rabbitmq-exporter
          env:
            - name: PUBLISH_PORT
              value: "9090"
            - name: RABBIT_URL
              value: "http://127.0.0.1:15672"
            - name: RABBIT_USER
              value: "guest"
            - name: RABBIT_PASSWORD
              value: "guest"
            - name: RABBIT_EXPORTERS
              value: "exchange,node,overview,queue"
            - name: OUTPUT_FORMAT
              value: "JSON"
            - name: LOG_LEVEL
              value: "info"
