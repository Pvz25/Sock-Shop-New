# Incident 6: Block Orders â†’ Payment traffic using NetworkPolicy
# This simulates payment gateway being unreachable due to network issues
---
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: block-payment-gateway
  namespace: sock-shop
spec:
  podSelector:
    matchLabels:
      name: payment
  policyTypes:
  - Ingress
  ingress:
  # Block traffic from orders service
  - from:
    - podSelector:
        matchLabels:
          name: orders
    ports:
    - protocol: TCP
      port: 8080
    # This rule matches but immediately denies (empty from selector)
  # Allow all other traffic (health checks, etc.)
  - from:
    - podSelector: {}
    ports:
    - protocol: TCP
      port: 8080
